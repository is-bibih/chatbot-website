{"remainingRequest":"/home/vivi/gits/COVID-19/public/node_modules/babel-loader/lib/index.js!/home/vivi/gits/COVID-19/public/node_modules/vuetify-loader/lib/loader.js??ref--17-0!/home/vivi/gits/COVID-19/public/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/vivi/gits/COVID-19/public/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vivi/gits/COVID-19/public/src/components/DownloadExcel.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vivi/gits/COVID-19/public/src/components/DownloadExcel.vue","mtime":1594241453831},{"path":"/home/vivi/gits/COVID-19/public/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vivi/gits/COVID-19/public/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/vivi/gits/COVID-19/public/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/home/vivi/gits/COVID-19/public/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vivi/gits/COVID-19/public/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgdXNlcnNSZWYgfSBmcm9tICcuLi9maXJlYmFzZSc7CmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogWydzb3J0QnknLCAnc29ydE5hbWUnLCAnbmFtZUxpc3QnLCAnc3RhcnRUaW1lJywgJ2VuZFRpbWUnXSwKCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHVzZXJzOiBbXSwKICAgICAganNvbl9maWVsZHM6IHsKICAgICAgICAnTm8uIHNlc2nDs24nOiAnU2Vzc2lvbklkJywKICAgICAgICAnTm9tYnJlIGRlIHVzdWFyaW8nOiAnTmFtZScsCiAgICAgICAgJ0ZlY2hhJzogJ0RhdGUnLAogICAgICAgICdIb3JhJzogJ0hvdXInLAogICAgICAgICdOby4gaW50ZXJhY2Npw7NuJzogJ2luZGV4JywKICAgICAgICAnRXNjcml0byB1c3VhcmlvJzogJ1RleHRRdWVyeScsCiAgICAgICAgJ0VzY3JpdG8gYWdlbnRlJzogJ0ludGVudE5hbWUnLAogICAgICAgICdDZXJ0aWR1bWJyZSc6ICdDb25maWRlbmNlJwogICAgICB9CiAgICB9OwogIH0sCgogIGZpcmViYXNlKCkgewogICAgLy8gICAgLy8gb3JkZW5hciBwb3Igc2VzaW9uCiAgICAvLyAgICB2YXIgdXNlcnMgPSB1c2Vyc1JlZi5vcmRlckJ5Q2hpbGQoJ1Nlc3Npb25JZCcpOwogICAgLy8gICAgLy8gb2J0ZW5lciBsYSBsaXN0YSBkZSBxdWVyaWVzCiAgICAvLyAgICB1c2Vycy5vbmNlKCd2YWx1ZScsIGZ1bmN0aW9uKHNuYXBzaG90KSB7CiAgICAvLyAgICAgIC8vIGNvbnRhZG9yIHBhcmEgZWwgaW5kaWNlCiAgICAvLyAgICAgIHZhciBpID0gMTsKICAgIC8vICAgICAgLy8gdmFyaWFibGUgcGFyYSBjb21wYXJhciBzZXNpb24KICAgIC8vICAgICAgdmFyIHRlbXBrZXkgPSAnJzsKICAgIC8vICAgICAgLy8gaXRlcmFyIHNvYnJlIGxhIGxpc3RhIGRlIHF1ZXJpZXMKICAgIC8vICAgICAgc25hcHNob3QuZm9yRWFjaChmdW5jdGlvbihjaGlsZFNuYXApIHsKICAgIC8vCS8vIGluY3JlbWVudGFyIGVsIGluZGljZSBvIHJlaW5pY2lhcmxvCiAgICAvLwlpZiAodGVtcGtleSA9PSBjaGlsZFNuYXAudmFsKClbJ1Nlc3Npb25JZCddKSB7CiAgICAvLwkJaSsrOwogICAgLy8JfSBlbHNlIHtpID0gMTt9CiAgICAvLwkvLyBhY3R1YWxpemFyIHZhcmlhYmxlIHBhcmEgc2VzaW9uCiAgICAvLwl0ZW1wa2V5ID0gY2hpbGRTbmFwLnZhbCgpWydTZXNzaW9uSWQnXTsKICAgIC8vCS8vIGFncmVnYXIgaW5kaWNlIGEgbG9zIGRhdG9zCiAgICAvLwl1c2Vyc1JlZi5jaGlsZChjaGlsZFNuYXAua2V5KS5jaGlsZCgnaW5kZXgnKS5zZXQoaSk7CiAgICAvLyAgICAgIH0pOwogICAgLy8gICAgfSk7CiAgICAvLyAgICAKICAgIC8vICAgIGlmICh0aGlzLnNvcnRCeSkgewogICAgLy8gICAgICByZXR1cm4gewogICAgLy8gICAgICAgICAgIHVzZXJzOiB1c2Vyc1JlZi5vcmRlckJ5Q2hpbGQodGhpcy5zb3J0QnkpLAogICAgLy8gICAgICB9CiAgICAvLyAgICB9IGVsc2UgewogICAgLy8gICAgICByZXR1cm4gewogICAgLy8gICAgICAgICB1c2VyczogdXNlcnMKICAgIC8vICAgICAgfQogICAgLy8gICAgfQogICAgdmFyIHVzZXJzID0gdXNlcnNSZWYub3JkZXJCeUNoaWxkKHRoaXMuc29ydEJ5KTsKCiAgICBpZiAodGhpcy5zb3J0QnkgPT0gJ1RpbWUnKSB7CiAgICAgIC8vIGVzIHVuIHF1ZXJ5LCBlbnRvbmNlcyBzZSBuZWNlc2l0YSB1c2FyIGVsIHJlZiBwYXJhIGFjY2VzYXIgbG9zIGRhdG9zCiAgICAgIHVzZXJzID0gdXNlcnMuc3RhcnRBdCh0aGlzLnN0YXJ0VGltZSkuZW5kQXQodGhpcy5lbmRUaW1lKS5yZWY7CiAgICAgIHJldHVybiB7CiAgICAgICAgdXNlcnM6IHVzZXJzCiAgICAgIH07CiAgICB9IGVsc2UgaWYgKHRoaXMuc29ydEJ5ID09ICdOYW1lJykgewogICAgICByZXR1cm4gewogICAgICAgIHVzZXJzOiB1c2Vycy5lcXVhbFRvKHRoaXMubmFtZUxpc3QpCiAgICAgIH07CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gewogICAgICAgIHVzZXJzOiB1c2VycwogICAgICB9OwogICAgfQogIH0KCn07"},{"version":3,"sources":["DownloadExcel.vue"],"names":[],"mappings":";;;;;;;;;;;;AAaA,SAAA,QAAA,QAAA,aAAA;AAEA,eAAA;AACA,EAAA,KAAA,EAAA,CAAA,QAAA,EAAA,UAAA,EAAA,UAAA,EAAA,WAAA,EAAA,SAAA,CADA;;AAEA,EAAA,IAAA,GAAA;AACA,WAAA;AACA,MAAA,KAAA,EAAA,EADA;AAEA,MAAA,WAAA,EAAA;AACA,sBAAA,WADA;AAEA,6BAAA,MAFA;AAGA,iBAAA,MAHA;AAIA,gBAAA,MAJA;AAKA,2BAAA,OALA;AAMA,2BAAA,WANA;AAOA,0BAAA,YAPA;AAQA,uBAAA;AARA;AAFA,KAAA;AAaA,GAhBA;;AAiBA,EAAA,QAAA,GAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAA,KAAA,GAAA,QAAA,CAAA,YAAA,CAAA,KAAA,MAAA,CAAA;;AACA,QAAA,KAAA,MAAA,IAAA,MAAA,EAAA;AACA;AACA,MAAA,KAAA,GAAA,KAAA,CAAA,OAAA,CAAA,KAAA,SAAA,EAAA,KAAA,CAAA,KAAA,OAAA,EAAA,GAAA;AACA,aAAA;AACA,QAAA,KAAA,EAAA;AADA,OAAA;AAGA,KANA,MAMA,IAAA,KAAA,MAAA,IAAA,MAAA,EAAA;AACA,aAAA;AACA,QAAA,KAAA,EAAA,KAAA,CAAA,OAAA,CAAA,KAAA,QAAA;AADA,OAAA;AAGA,KAJA,MAIA;AACA,aAAA;AACA,QAAA,KAAA,EAAA;AADA,OAAA;AAGA;AACA;;AAhEA,CAAA","sourcesContent":["<template>\n    <div class=\"download-sorted-excel\">\n        <download-excel\n            :data   = users\n            :fields = \"json_fields\"\n            worksheet = \"My Worksheet\"\n            name    = \"queries_meddy.xls\">\n    \t    <b-button variant=\"success\">Descargar (ordenado por {{ sortName }})</b-button>\n        </download-excel>\n    </div>\n</template>\n\n<script>\nimport { usersRef } from '../firebase';\n\nexport default {\n  props : ['sortBy', 'sortName', 'nameList', 'startTime', 'endTime'],\n  data() {\n    return {\n      users: [],\n      json_fields: {\n\t'No. sesión': 'SessionId',\n\t'Nombre de usuario': 'Name',\n\t'Fecha': 'Date',\n\t'Hora': 'Hour',\n\t'No. interacción': 'index',\n        'Escrito usuario': 'TextQuery',\n        'Escrito agente': 'IntentName',\n        'Certidumbre': 'Confidence'\n      },\n    };\n  },\n  firebase() {\n//    // ordenar por sesion\n//    var users = usersRef.orderByChild('SessionId');\n//    // obtener la lista de queries\n//    users.once('value', function(snapshot) {\n//      // contador para el indice\n//      var i = 1;\n//      // variable para comparar sesion\n//      var tempkey = '';\n//      // iterar sobre la lista de queries\n//      snapshot.forEach(function(childSnap) {\n//\t// incrementar el indice o reiniciarlo\n//\tif (tempkey == childSnap.val()['SessionId']) {\n//\t\ti++;\n//\t} else {i = 1;}\n//\t// actualizar variable para sesion\n//\ttempkey = childSnap.val()['SessionId'];\n//\t// agregar indice a los datos\n//\tusersRef.child(childSnap.key).child('index').set(i);\n//      });\n//    });\n//    \n//    if (this.sortBy) {\n//      return {\n//           users: usersRef.orderByChild(this.sortBy),\n//      }\n//    } else {\n//      return {\n//         users: users\n//      }\n//    }\n      var users = usersRef.orderByChild(this.sortBy);\n      if (this.sortBy == 'Time') {\n\t// es un query, entonces se necesita usar el ref para accesar los datos\n\tusers = users.startAt(this.startTime).endAt(this.endTime).ref;\n\treturn {\n\t  users: users,\n\t}\n      } else if (this.sortBy == 'Name') {\n\treturn {\n\t  users: users.equalTo(this.nameList),\n\t}\n      } else {\n\treturn {\n\t  users: users,\n\t}\n      }\n  }\n};\n\n</script>\n\n<style scoped>  /* \"scoped\" attribute limit the CSS to this component only */\n  .download-excel {\n    margin-top: 30px;\n  }\n</style>\n"],"sourceRoot":"src/components"}]}